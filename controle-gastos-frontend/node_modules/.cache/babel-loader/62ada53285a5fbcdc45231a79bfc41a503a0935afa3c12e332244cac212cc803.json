{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alisson\\\\Desktop\\\\NEWAPP CONTROLE FINANCEIRO\\\\controle-gastos-frontend\\\\src\\\\components\\\\Relatorio\\\\Relatorio.js\",\n  _s = $RefreshSig$();\n// src/components/Relatorio/Relatorio.js\nimport React, { useEffect, useState } from 'react';\nimport { obterTransacoes, obterCategorias, obterTags } from '../../api.js';\nimport './Relatorio.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Relatorio = () => {\n  _s();\n  // Estados para os dados\n  const [transacoes, setTransacoes] = useState([]);\n  const [filteredTransacoes, setFilteredTransacoes] = useState([]);\n\n  // Estados para os filtros\n  const [dataInicio, setDataInicio] = useState('');\n  const [dataFim, setDataFim] = useState('');\n  const [selectedPessoas, setSelectedPessoas] = useState([]);\n  const [categorias, setCategorias] = useState([]);\n  const [tags, setTags] = useState([]);\n  // tagFilters: objeto onde a chave é o nome da categoria e o valor é um array de tags selecionadas\n  const [tagFilters, setTagFilters] = useState({});\n\n  // Carregar dados do backend\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const transData = await obterTransacoes();\n        const transArray = transData.transacoes || [];\n        setTransacoes(transArray);\n        setFilteredTransacoes(transArray);\n        const cats = await obterCategorias();\n        setCategorias(cats);\n        // Inicializa o objeto de filtro de tags com cada categoria\n        const initTagFilters = {};\n        cats.forEach(cat => {\n          initTagFilters[cat.nome] = [];\n        });\n        setTagFilters(initTagFilters);\n        const tgs = await obterTags();\n        setTags(tgs);\n      } catch (error) {\n        console.error('Erro ao carregar dados para relatório:', error);\n      }\n    }\n    fetchData();\n  }, []);\n\n  // Extrai uma lista de pessoas distintas dos pagamentos das transações\n  const distinctPessoas = () => {\n    const pessoasSet = new Set();\n    transacoes.forEach(tr => {\n      if (tr.pagamentos && tr.pagamentos.length > 0) {\n        tr.pagamentos.forEach(p => {\n          if (p.pessoa) pessoasSet.add(p.pessoa);\n        });\n      }\n    });\n    return Array.from(pessoasSet);\n  };\n\n  // Agrupa as tags por categoria (usando o campo \"categoria\" da tag)\n  const tagsPorCategoria = tags.reduce((acc, tag) => {\n    if (tag.categoria) {\n      if (!acc[tag.categoria]) {\n        acc[tag.categoria] = [];\n      }\n      acc[tag.categoria].push(tag);\n    }\n    return acc;\n  }, {});\n\n  // Aplica os filtros nos dados das transações\n  const applyFilters = () => {\n    let result = transacoes;\n    // Filtro por data\n    if (dataInicio) {\n      result = result.filter(tr => new Date(tr.data) >= new Date(dataInicio));\n    }\n    if (dataFim) {\n      result = result.filter(tr => new Date(tr.data) <= new Date(dataFim));\n    }\n    // Filtro por pessoas: incluir a transação se alguma de suas sub-transações tiver a pessoa filtrada\n    if (selectedPessoas.length > 0) {\n      result = result.filter(tr => {\n        return tr.pagamentos && tr.pagamentos.some(p => selectedPessoas.includes(p.pessoa));\n      });\n    }\n    // Filtro por tags: para cada categoria em tagFilters com seleções, a transação deve ter pelo menos uma tag nessa categoria\n    Object.keys(tagFilters).forEach(cat => {\n      const selectedTags = tagFilters[cat];\n      if (selectedTags && selectedTags.length > 0) {\n        result = result.filter(tr => {\n          if (tr.tags && tr.tags[cat]) {\n            // Verifica se há interseção entre as tags da transação e as selecionadas\n            return tr.tags[cat].some(tag => selectedTags.includes(tag));\n          }\n          return false;\n        });\n      }\n    });\n    setFilteredTransacoes(result);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relatorio-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"relatorio-title\",\n      children: \"Relat\\xF3rios\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"filter-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Data In\\xEDcio:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: dataInicio,\n          onChange: e => setDataInicio(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Data Fim:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          value: dataFim,\n          onChange: e => setDataFim(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Pessoas:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          multiple: true,\n          value: selectedPessoas,\n          onChange: e => {\n            const values = Array.from(e.target.selectedOptions, option => option.value);\n            setSelectedPessoas(values);\n          },\n          children: distinctPessoas().map((p, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: p,\n            children: p\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), categorias.map(cat => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [cat.nome, \" (Tags):\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          multiple: true,\n          value: tagFilters[cat.nome] || [],\n          onChange: e => {\n            const selected = Array.from(e.target.selectedOptions, option => option.value);\n            setTagFilters(prev => ({\n              ...prev,\n              [cat.nome]: selected\n            }));\n          },\n          children: (tagsPorCategoria[cat.nome] || []).map(tag => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: tag.nome,\n            children: tag.nome\n          }, tag.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)]\n      }, cat.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-group\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: applyFilters,\n          children: \"Filtrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relatorio-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Resultados (\", filteredTransacoes.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this), filteredTransacoes.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"relatorio-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Descri\\xE7\\xE3o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Data\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Valor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tipo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Pessoas\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tags\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredTransacoes.map((tr, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: tr.descricao\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: new Date(tr.data).toLocaleDateString('pt-BR', {\n                timeZone: 'UTC'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"R$\", tr.valor]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: tr.tipo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: tr.pagamentos && tr.pagamentos.map((pag, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: pag.pessoa\n              }, i, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: tr.tags && Object.keys(tr.tags).map((cat, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [cat, \":\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 36\n                }, this), \" \", tr.tags[cat].join(', ')]\n              }, i, true, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Nenhum registro encontrado.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(Relatorio, \"uqnNXYoB7ULXpR7NN8ni3BsALos=\");\n_c = Relatorio;\nexport default Relatorio;\nvar _c;\n$RefreshReg$(_c, \"Relatorio\");","map":{"version":3,"names":["React","useEffect","useState","obterTransacoes","obterCategorias","obterTags","jsxDEV","_jsxDEV","Relatorio","_s","transacoes","setTransacoes","filteredTransacoes","setFilteredTransacoes","dataInicio","setDataInicio","dataFim","setDataFim","selectedPessoas","setSelectedPessoas","categorias","setCategorias","tags","setTags","tagFilters","setTagFilters","fetchData","transData","transArray","cats","initTagFilters","forEach","cat","nome","tgs","error","console","distinctPessoas","pessoasSet","Set","tr","pagamentos","length","p","pessoa","add","Array","from","tagsPorCategoria","reduce","acc","tag","categoria","push","applyFilters","result","filter","Date","data","some","includes","Object","keys","selectedTags","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","multiple","values","selectedOptions","option","map","idx","selected","prev","id","onClick","descricao","toLocaleDateString","timeZone","valor","tipo","pag","i","join","_c","$RefreshReg$"],"sources":["C:/Users/Alisson/Desktop/NEWAPP CONTROLE FINANCEIRO/controle-gastos-frontend/src/components/Relatorio/Relatorio.js"],"sourcesContent":["// src/components/Relatorio/Relatorio.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { obterTransacoes, obterCategorias, obterTags } from '../../api.js';\r\nimport './Relatorio.css';\r\n\r\nconst Relatorio = () => {\r\n  // Estados para os dados\r\n  const [transacoes, setTransacoes] = useState([]);\r\n  const [filteredTransacoes, setFilteredTransacoes] = useState([]);\r\n\r\n  // Estados para os filtros\r\n  const [dataInicio, setDataInicio] = useState('');\r\n  const [dataFim, setDataFim] = useState('');\r\n  const [selectedPessoas, setSelectedPessoas] = useState([]);\r\n  const [categorias, setCategorias] = useState([]);\r\n  const [tags, setTags] = useState([]);\r\n  // tagFilters: objeto onde a chave é o nome da categoria e o valor é um array de tags selecionadas\r\n  const [tagFilters, setTagFilters] = useState({});\r\n\r\n  // Carregar dados do backend\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const transData = await obterTransacoes();\r\n        const transArray = transData.transacoes || [];\r\n        setTransacoes(transArray);\r\n        setFilteredTransacoes(transArray);\r\n        const cats = await obterCategorias();\r\n        setCategorias(cats);\r\n        // Inicializa o objeto de filtro de tags com cada categoria\r\n        const initTagFilters = {};\r\n        cats.forEach(cat => {\r\n          initTagFilters[cat.nome] = [];\r\n        });\r\n        setTagFilters(initTagFilters);\r\n        const tgs = await obterTags();\r\n        setTags(tgs);\r\n      } catch (error) {\r\n        console.error('Erro ao carregar dados para relatório:', error);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Extrai uma lista de pessoas distintas dos pagamentos das transações\r\n  const distinctPessoas = () => {\r\n    const pessoasSet = new Set();\r\n    transacoes.forEach(tr => {\r\n      if(tr.pagamentos && tr.pagamentos.length > 0) {\r\n        tr.pagamentos.forEach(p => {\r\n          if(p.pessoa) pessoasSet.add(p.pessoa);\r\n        });\r\n      }\r\n    });\r\n    return Array.from(pessoasSet);\r\n  };\r\n\r\n  // Agrupa as tags por categoria (usando o campo \"categoria\" da tag)\r\n  const tagsPorCategoria = tags.reduce((acc, tag) => {\r\n    if(tag.categoria) {\r\n      if(!acc[tag.categoria]) {\r\n        acc[tag.categoria] = [];\r\n      }\r\n      acc[tag.categoria].push(tag);\r\n    }\r\n    return acc;\r\n  }, {});\r\n\r\n  // Aplica os filtros nos dados das transações\r\n  const applyFilters = () => {\r\n    let result = transacoes;\r\n    // Filtro por data\r\n    if(dataInicio) {\r\n      result = result.filter(tr => new Date(tr.data) >= new Date(dataInicio));\r\n    }\r\n    if(dataFim) {\r\n      result = result.filter(tr => new Date(tr.data) <= new Date(dataFim));\r\n    }\r\n    // Filtro por pessoas: incluir a transação se alguma de suas sub-transações tiver a pessoa filtrada\r\n    if(selectedPessoas.length > 0) {\r\n      result = result.filter(tr => {\r\n        return tr.pagamentos && tr.pagamentos.some(p => selectedPessoas.includes(p.pessoa));\r\n      });\r\n    }\r\n    // Filtro por tags: para cada categoria em tagFilters com seleções, a transação deve ter pelo menos uma tag nessa categoria\r\n    Object.keys(tagFilters).forEach(cat => {\r\n      const selectedTags = tagFilters[cat];\r\n      if(selectedTags && selectedTags.length > 0) {\r\n        result = result.filter(tr => {\r\n          if(tr.tags && tr.tags[cat]) {\r\n            // Verifica se há interseção entre as tags da transação e as selecionadas\r\n            return tr.tags[cat].some(tag => selectedTags.includes(tag));\r\n          }\r\n          return false;\r\n        });\r\n      }\r\n    });\r\n    setFilteredTransacoes(result);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relatorio-container\">\r\n      <h2 className=\"relatorio-title\">Relatórios</h2>\r\n      <div className=\"filter-panel\">\r\n        <div className=\"filter-group\">\r\n          <label>Data Início:</label>\r\n          <input type=\"date\" value={dataInicio} onChange={e => setDataInicio(e.target.value)} />\r\n        </div>\r\n        <div className=\"filter-group\">\r\n          <label>Data Fim:</label>\r\n          <input type=\"date\" value={dataFim} onChange={e => setDataFim(e.target.value)} />\r\n        </div>\r\n        <div className=\"filter-group\">\r\n          <label>Pessoas:</label>\r\n          <select multiple\r\n            value={selectedPessoas}\r\n            onChange={e => {\r\n              const values = Array.from(e.target.selectedOptions, option => option.value);\r\n              setSelectedPessoas(values);\r\n            }}\r\n          >\r\n            {distinctPessoas().map((p, idx) => (\r\n              <option key={idx} value={p}>{p}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        {categorias.map(cat => (\r\n          <div key={cat.id} className=\"filter-group\">\r\n            <label>{cat.nome} (Tags):</label>\r\n            <select multiple\r\n              value={tagFilters[cat.nome] || []}\r\n              onChange={e => {\r\n                const selected = Array.from(e.target.selectedOptions, option => option.value);\r\n                setTagFilters(prev => ({\r\n                  ...prev,\r\n                  [cat.nome]: selected\r\n                }));\r\n              }}\r\n            >\r\n              {(tagsPorCategoria[cat.nome] || []).map(tag => (\r\n                <option key={tag.id} value={tag.nome}>{tag.nome}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        ))}\r\n        <div className=\"filter-group\">\r\n          <button onClick={applyFilters}>Filtrar</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"relatorio-results\">\r\n        <h3>Resultados ({filteredTransacoes.length})</h3>\r\n        {filteredTransacoes.length > 0 ? (\r\n          <table className=\"relatorio-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Descrição</th>\r\n                <th>Data</th>\r\n                <th>Valor</th>\r\n                <th>Tipo</th>\r\n                <th>Pessoas</th>\r\n                <th>Tags</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredTransacoes.map((tr, idx) => (\r\n                <tr key={idx}>\r\n                  <td>{tr.descricao}</td>\r\n                  <td>{new Date(tr.data).toLocaleDateString('pt-BR', { timeZone: 'UTC' })}</td>\r\n                  <td>R${tr.valor}</td>\r\n                  <td>{tr.tipo}</td>\r\n                  <td>\r\n                    {tr.pagamentos && tr.pagamentos.map((pag, i) => (\r\n                      <div key={i}>{pag.pessoa}</div>\r\n                    ))}\r\n                  </td>\r\n                  <td>\r\n                    {tr.tags && Object.keys(tr.tags).map((cat, i) => (\r\n                      <div key={i}><strong>{cat}:</strong> {tr.tags[cat].join(', ')}</div>\r\n                    ))}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <p>Nenhum registro encontrado.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Relatorio;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}