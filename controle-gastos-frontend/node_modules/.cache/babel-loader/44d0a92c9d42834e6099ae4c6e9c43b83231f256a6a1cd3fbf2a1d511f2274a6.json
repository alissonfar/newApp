{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alisson\\\\Desktop\\\\NEWAPP CONTROLE FINANCEIRO\\\\controle-gastos-frontend\\\\src\\\\pages\\\\Relatorio\\\\Relatorio.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { obterTransacoes, obterCategorias, obterTags } from '../../api.js';\nimport './Relatorio.css';\nimport { exportDataToCSV } from '../../utils/export/exportData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Relatorio = () => {\n  _s();\n  // Array achatado com base em pai + pagamentos\n  const [allPayments, setAllPayments] = useState([]);\n  // Resultado final após filtros\n  const [filteredRows, setFilteredRows] = useState([]);\n\n  // Filtros\n  const [dataInicio, setDataInicio] = useState('');\n  const [dataFim, setDataFim] = useState('');\n  const [selectedTipo, setSelectedTipo] = useState('both');\n  const [selectedPessoas, setSelectedPessoas] = useState([]);\n  const [categorias, setCategorias] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [tagFilters, setTagFilters] = useState({});\n  // Dentro do componente Relatorio\n  const handleExport = () => {\n    // 'filteredRows' é o array que contém os dados filtrados\n    exportDataToCSV(filteredRows, 'relatorio.csv');\n  };\n\n  // Sumário\n  const [summaryInfo, setSummaryInfo] = useState({});\n\n  // Carregamento inicial\n  useEffect(() => {\n    async function fetchData() {\n      try {\n        const transData = await obterTransacoes();\n        const transArray = transData.transacoes || [];\n\n        // 1) Achatar cada transacao pai em vários registros\n        const flattened = [];\n        transArray.forEach(tr => {\n          const paiTags = tr.tags || {};\n          // Se não houver pagamentos, criamos um \"pagamento\" vazio\n          if (!tr.pagamentos || tr.pagamentos.length === 0) {\n            flattened.push({\n              parentId: tr.id,\n              dataPai: tr.data,\n              tipoPai: tr.tipo,\n              descricaoPai: tr.descricao,\n              tagsPai: paiTags,\n              valorPai: tr.valor,\n              // pagamento \"vazio\"\n              pessoa: null,\n              valorPagamento: 0,\n              tagsPagamento: {}\n            });\n          } else {\n            tr.pagamentos.forEach(p => {\n              flattened.push({\n                parentId: tr.id,\n                dataPai: tr.data,\n                tipoPai: tr.tipo,\n                descricaoPai: tr.descricao,\n                tagsPai: paiTags,\n                valorPai: tr.valor,\n                pessoa: p.pessoa,\n                valorPagamento: p.valor,\n                tagsPagamento: p.tags || {}\n              });\n            });\n          }\n        });\n\n        // 2) Armazenamos no estado\n        setAllPayments(flattened);\n\n        // Carrega categorias e tags\n        const cats = await obterCategorias();\n        setCategorias(cats);\n        const initTagFilters = {};\n        cats.forEach(cat => {\n          initTagFilters[cat.nome] = [];\n        });\n        setTagFilters(initTagFilters);\n        const tgs = await obterTags();\n        setTags(tgs);\n      } catch (error) {\n        console.error('Erro ao carregar dados para relatório:', error);\n      }\n    }\n    fetchData();\n  }, []);\n\n  // Função que extrai pessoas únicas de um array achatado\n  const distinctPessoas = rows => {\n    const pessoasSet = new Set();\n    rows.forEach(row => {\n      if (row.pessoa) {\n        pessoasSet.add(row.pessoa);\n      }\n    });\n    return Array.from(pessoasSet);\n  };\n\n  // Agrupa as tags por categoria (para exibir nos filtros)\n  const tagsPorCategoria = tags.reduce((acc, tag) => {\n    if (tag.categoria) {\n      if (!acc[tag.categoria]) {\n        acc[tag.categoria] = [];\n      }\n      acc[tag.categoria].push(tag);\n    }\n    return acc;\n  }, {});\n\n  // Filtro principal\n  const applyFilters = () => {\n    let result = [...allPayments]; // Cópia do array achatado\n\n    // 1) Filtro por data (pai)\n    if (dataInicio) {\n      result = result.filter(row => new Date(row.dataPai) >= new Date(dataInicio));\n    }\n    if (dataFim) {\n      result = result.filter(row => new Date(row.dataPai) <= new Date(dataFim));\n    }\n\n    // 2) Filtro por tipo (pai)\n    if (selectedTipo !== 'both') {\n      result = result.filter(row => row.tipoPai.toLowerCase() === selectedTipo);\n    }\n\n    // 3) Filtro por pessoas (pagamento)\n    if (selectedPessoas.length > 0) {\n      result = result.filter(row => row.pessoa && selectedPessoas.includes(row.pessoa));\n    }\n\n    // 4) Filtro por tags: considerar tags do pai e do pagamento\n    Object.keys(tagFilters).forEach(cat => {\n      const selectedTags = tagFilters[cat];\n      if (selectedTags && selectedTags.length > 0) {\n        result = result.filter(row => {\n          // Tags do pai\n          const paiTags = row.tagsPai[cat] || [];\n          const paiMatch = paiTags.some(tag => selectedTags.map(t => t.toLowerCase()).includes(tag.toLowerCase()));\n\n          // Tags do pagamento\n          const pagTags = row.tagsPagamento[cat] || [];\n          const pagMatch = pagTags.some(tag => selectedTags.map(t => t.toLowerCase()).includes(tag.toLowerCase()));\n          return paiMatch || pagMatch;\n        });\n      }\n    });\n    setFilteredRows(result);\n  };\n\n  // Recalcula sumário toda vez que filteredRows muda\n  useEffect(() => {\n    // 1) total de \"transações\" = quantos pagamentos (linhas) foram filtrados\n    const totalTransactions = filteredRows.length;\n\n    // 2) soma dos valores = soma de row.valorPagamento\n    const totalValueNumber = filteredRows.reduce((acc, row) => acc + parseFloat(row.valorPagamento || 0), 0);\n    const totalValue = totalValueNumber.toFixed(2);\n\n    // 3) pessoas distintas\n    const people = distinctPessoas(filteredRows);\n\n    // 4) média por pessoa\n    const averagePerPerson = people.length > 0 ? (totalValueNumber / people.length).toFixed(2) : '0.00';\n    setSummaryInfo({\n      totalTransactions,\n      totalValue,\n      totalPeople: people.length,\n      averagePerPerson\n    });\n  }, [filteredRows]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relatorio-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"relatorio-title\",\n      children: \"Relat\\xF3rios\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"top-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filter-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Data In\\xEDcio (Pai):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: dataInicio,\n            onChange: e => setDataInicio(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Data Fim (Pai):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: dataFim,\n            onChange: e => setDataFim(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Pessoas (Pagamento):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            multiple: true,\n            value: selectedPessoas,\n            onChange: e => {\n              const values = Array.from(e.target.selectedOptions, option => option.value);\n              setSelectedPessoas(values);\n            },\n            children: distinctPessoas(allPayments).map((p, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: p,\n              children: p\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Tipo de Transa\\xE7\\xE3o (Pai):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedTipo,\n            onChange: e => setSelectedTipo(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"both\",\n              children: \"Ambos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"gasto\",\n              children: \"Gasto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"recebivel\",\n              children: \"Receb\\xEDvel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this), categorias.map(cat => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [cat.nome, \" (Tags):\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            multiple: true,\n            value: tagFilters[cat.nome] || [],\n            onChange: e => {\n              const selected = Array.from(e.target.selectedOptions, option => option.value);\n              setTagFilters(prev => ({\n                ...prev,\n                [cat.nome]: selected\n              }));\n            },\n            children: (tagsPorCategoria[cat.nome] || []).map(tag => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: tag.nome,\n              children: tag.nome\n            }, tag.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)]\n        }, cat.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-group\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: applyFilters,\n            children: \"Filtrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"summary-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Resumo dos Resultados\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total de \\u201CTransa\\xE7\\xF5es\\u201D (Pagamentos):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 14\n          }, this), \" \", summaryInfo.totalTransactions]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Total em Valor:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 14\n          }, this), \" R$\", summaryInfo.totalValue]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"N\\xFAmero de Pessoas:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 14\n          }, this), \" \", summaryInfo.totalPeople]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"M\\xE9dia por Pessoa:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 14\n          }, this), \" R$\", summaryInfo.averagePerPerson]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relatorio-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Resultados (\", filteredRows.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), filteredRows.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"relatorio-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Descri\\xE7\\xE3o (Pai)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Data (Pai)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Pessoa (Pagamento)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Valor (Pagamento)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tipo (Pai)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tags\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredRows.map((row, idx) => {\n            // Tags do pai\n            const paiTags = row.tagsPai || {};\n            // Tags do pagamento\n            const pagTags = row.tagsPagamento || {};\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.descricaoPai\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: new Date(row.dataPai).toLocaleDateString('pt-BR', {\n                  timeZone: 'UTC'\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.pessoa || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"R$\", parseFloat(row.valorPagamento || 0).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: row.tipoPai\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [Object.keys(paiTags).map((catName, i) => paiTags[catName].map((tagName, j) => /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"tag-chip relatorio-tag-chip\",\n                  children: [\"[Pai] \", catName, \": \", tagName]\n                }, `pai-${i}-${j}`, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 27\n                }, this))), Object.keys(pagTags).map((catName, i) => pagTags[catName].map((tagName, j) => /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"tag-chip relatorio-tag-chip pag-tag-chip\",\n                  children: [\"[Pag] \", catName, \": \", tagName]\n                }, `pag-${i}-${j}`, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 27\n                }, this)))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Nenhum registro encontrado.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n};\n_s(Relatorio, \"4kqI/29NWFJkV/3D2WHifaUUTiw=\");\n_c = Relatorio;\nexport default Relatorio;\nvar _c;\n$RefreshReg$(_c, \"Relatorio\");","map":{"version":3,"names":["React","useEffect","useState","obterTransacoes","obterCategorias","obterTags","exportDataToCSV","jsxDEV","_jsxDEV","Relatorio","_s","allPayments","setAllPayments","filteredRows","setFilteredRows","dataInicio","setDataInicio","dataFim","setDataFim","selectedTipo","setSelectedTipo","selectedPessoas","setSelectedPessoas","categorias","setCategorias","tags","setTags","tagFilters","setTagFilters","handleExport","summaryInfo","setSummaryInfo","fetchData","transData","transArray","transacoes","flattened","forEach","tr","paiTags","pagamentos","length","push","parentId","id","dataPai","data","tipoPai","tipo","descricaoPai","descricao","tagsPai","valorPai","valor","pessoa","valorPagamento","tagsPagamento","p","cats","initTagFilters","cat","nome","tgs","error","console","distinctPessoas","rows","pessoasSet","Set","row","add","Array","from","tagsPorCategoria","reduce","acc","tag","categoria","applyFilters","result","filter","Date","toLowerCase","includes","Object","keys","selectedTags","paiMatch","some","map","t","pagTags","pagMatch","totalTransactions","totalValueNumber","parseFloat","totalValue","toFixed","people","averagePerPerson","totalPeople","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","multiple","values","selectedOptions","option","idx","selected","prev","onClick","toLocaleDateString","timeZone","catName","i","tagName","j","_c","$RefreshReg$"],"sources":["C:/Users/Alisson/Desktop/NEWAPP CONTROLE FINANCEIRO/controle-gastos-frontend/src/pages/Relatorio/Relatorio.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { obterTransacoes, obterCategorias, obterTags } from '../../api.js';\r\nimport './Relatorio.css';\r\nimport { exportDataToCSV } from '../../utils/export/exportData';\r\n\r\nconst Relatorio = () => {\r\n  // Array achatado com base em pai + pagamentos\r\n  const [allPayments, setAllPayments] = useState([]); \r\n  // Resultado final após filtros\r\n  const [filteredRows, setFilteredRows] = useState([]);\r\n\r\n  // Filtros\r\n  const [dataInicio, setDataInicio] = useState('');\r\n  const [dataFim, setDataFim] = useState('');\r\n  const [selectedTipo, setSelectedTipo] = useState('both');\r\n  const [selectedPessoas, setSelectedPessoas] = useState([]);\r\n  const [categorias, setCategorias] = useState([]);\r\n  const [tags, setTags] = useState([]);\r\n  const [tagFilters, setTagFilters] = useState({});\r\n  // Dentro do componente Relatorio\r\nconst handleExport = () => {\r\n  // 'filteredRows' é o array que contém os dados filtrados\r\n  exportDataToCSV(filteredRows, 'relatorio.csv');\r\n};\r\n\r\n  // Sumário\r\n  const [summaryInfo, setSummaryInfo] = useState({});\r\n\r\n  // Carregamento inicial\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        const transData = await obterTransacoes();\r\n        const transArray = transData.transacoes || [];\r\n\r\n        // 1) Achatar cada transacao pai em vários registros\r\n        const flattened = [];\r\n        transArray.forEach((tr) => {\r\n          const paiTags = tr.tags || {};\r\n          // Se não houver pagamentos, criamos um \"pagamento\" vazio\r\n          if (!tr.pagamentos || tr.pagamentos.length === 0) {\r\n            flattened.push({\r\n              parentId: tr.id,\r\n              dataPai: tr.data,\r\n              tipoPai: tr.tipo,\r\n              descricaoPai: tr.descricao,\r\n              tagsPai: paiTags,\r\n              valorPai: tr.valor,\r\n              // pagamento \"vazio\"\r\n              pessoa: null,\r\n              valorPagamento: 0,\r\n              tagsPagamento: {}\r\n            });\r\n          } else {\r\n            tr.pagamentos.forEach((p) => {\r\n              flattened.push({\r\n                parentId: tr.id,\r\n                dataPai: tr.data,\r\n                tipoPai: tr.tipo,\r\n                descricaoPai: tr.descricao,\r\n                tagsPai: paiTags,\r\n                valorPai: tr.valor,\r\n                pessoa: p.pessoa,\r\n                valorPagamento: p.valor,\r\n                tagsPagamento: p.tags || {}\r\n              });\r\n            });\r\n          }\r\n        });\r\n\r\n        // 2) Armazenamos no estado\r\n        setAllPayments(flattened);\r\n\r\n        // Carrega categorias e tags\r\n        const cats = await obterCategorias();\r\n        setCategorias(cats);\r\n        const initTagFilters = {};\r\n        cats.forEach(cat => {\r\n          initTagFilters[cat.nome] = [];\r\n        });\r\n        setTagFilters(initTagFilters);\r\n\r\n        const tgs = await obterTags();\r\n        setTags(tgs);\r\n\r\n      } catch (error) {\r\n        console.error('Erro ao carregar dados para relatório:', error);\r\n      }\r\n    }\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Função que extrai pessoas únicas de um array achatado\r\n  const distinctPessoas = (rows) => {\r\n    const pessoasSet = new Set();\r\n    rows.forEach(row => {\r\n      if (row.pessoa) {\r\n        pessoasSet.add(row.pessoa);\r\n      }\r\n    });\r\n    return Array.from(pessoasSet);\r\n  };\r\n\r\n  // Agrupa as tags por categoria (para exibir nos filtros)\r\n  const tagsPorCategoria = tags.reduce((acc, tag) => {\r\n    if (tag.categoria) {\r\n      if (!acc[tag.categoria]) {\r\n        acc[tag.categoria] = [];\r\n      }\r\n      acc[tag.categoria].push(tag);\r\n    }\r\n    return acc;\r\n  }, {});\r\n\r\n  // Filtro principal\r\n  const applyFilters = () => {\r\n    let result = [...allPayments]; // Cópia do array achatado\r\n\r\n    // 1) Filtro por data (pai)\r\n    if (dataInicio) {\r\n      result = result.filter(row => new Date(row.dataPai) >= new Date(dataInicio));\r\n    }\r\n    if (dataFim) {\r\n      result = result.filter(row => new Date(row.dataPai) <= new Date(dataFim));\r\n    }\r\n\r\n    // 2) Filtro por tipo (pai)\r\n    if (selectedTipo !== 'both') {\r\n      result = result.filter(row => row.tipoPai.toLowerCase() === selectedTipo);\r\n    }\r\n\r\n    // 3) Filtro por pessoas (pagamento)\r\n    if (selectedPessoas.length > 0) {\r\n      result = result.filter(row => row.pessoa && selectedPessoas.includes(row.pessoa));\r\n    }\r\n\r\n    // 4) Filtro por tags: considerar tags do pai e do pagamento\r\n    Object.keys(tagFilters).forEach(cat => {\r\n      const selectedTags = tagFilters[cat];\r\n      if (selectedTags && selectedTags.length > 0) {\r\n        result = result.filter(row => {\r\n          // Tags do pai\r\n          const paiTags = row.tagsPai[cat] || [];\r\n          const paiMatch = paiTags.some(tag =>\r\n            selectedTags.map(t => t.toLowerCase()).includes(tag.toLowerCase())\r\n          );\r\n\r\n          // Tags do pagamento\r\n          const pagTags = row.tagsPagamento[cat] || [];\r\n          const pagMatch = pagTags.some(tag =>\r\n            selectedTags.map(t => t.toLowerCase()).includes(tag.toLowerCase())\r\n          );\r\n\r\n          return (paiMatch || pagMatch);\r\n        });\r\n      }\r\n    });\r\n\r\n    setFilteredRows(result);\r\n  };\r\n\r\n  // Recalcula sumário toda vez que filteredRows muda\r\n  useEffect(() => {\r\n    // 1) total de \"transações\" = quantos pagamentos (linhas) foram filtrados\r\n    const totalTransactions = filteredRows.length;\r\n\r\n    // 2) soma dos valores = soma de row.valorPagamento\r\n    const totalValueNumber = filteredRows.reduce(\r\n      (acc, row) => acc + parseFloat(row.valorPagamento || 0),\r\n      0\r\n    );\r\n    const totalValue = totalValueNumber.toFixed(2);\r\n\r\n    // 3) pessoas distintas\r\n    const people = distinctPessoas(filteredRows);\r\n\r\n    // 4) média por pessoa\r\n    const averagePerPerson = people.length > 0\r\n      ? (totalValueNumber / people.length).toFixed(2)\r\n      : '0.00';\r\n\r\n    setSummaryInfo({\r\n      totalTransactions,\r\n      totalValue,\r\n      totalPeople: people.length,\r\n      averagePerPerson\r\n    });\r\n  }, [filteredRows]);\r\n\r\n  return (\r\n    <div className=\"relatorio-container\">\r\n      <h2 className=\"relatorio-title\">Relatórios</h2>\r\n\r\n      <div className=\"top-section\">\r\n        {/* Painel de Filtros */}\r\n        <div className=\"filter-panel\">\r\n          <div className=\"filter-group\">\r\n            <label>Data Início (Pai):</label>\r\n            <input\r\n              type=\"date\"\r\n              value={dataInicio}\r\n              onChange={e => setDataInicio(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"filter-group\">\r\n            <label>Data Fim (Pai):</label>\r\n            <input\r\n              type=\"date\"\r\n              value={dataFim}\r\n              onChange={e => setDataFim(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"filter-group\">\r\n            <label>Pessoas (Pagamento):</label>\r\n            <select\r\n              multiple\r\n              value={selectedPessoas}\r\n              onChange={e => {\r\n                const values = Array.from(e.target.selectedOptions, option => option.value);\r\n                setSelectedPessoas(values);\r\n              }}\r\n            >\r\n              {distinctPessoas(allPayments).map((p, idx) => (\r\n                <option key={idx} value={p}>{p}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div className=\"filter-group\">\r\n            <label>Tipo de Transação (Pai):</label>\r\n            <select value={selectedTipo} onChange={e => setSelectedTipo(e.target.value)}>\r\n              <option value=\"both\">Ambos</option>\r\n              <option value=\"gasto\">Gasto</option>\r\n              <option value=\"recebivel\">Recebível</option>\r\n            </select>\r\n          </div>\r\n          {categorias.map(cat => (\r\n            <div key={cat.id} className=\"filter-group\">\r\n              <label>{cat.nome} (Tags):</label>\r\n              <select\r\n                multiple\r\n                value={tagFilters[cat.nome] || []}\r\n                onChange={e => {\r\n                  const selected = Array.from(e.target.selectedOptions, option => option.value);\r\n                  setTagFilters(prev => ({ ...prev, [cat.nome]: selected }));\r\n                }}\r\n              >\r\n                {(tagsPorCategoria[cat.nome] || []).map(tag => (\r\n                  <option key={tag.id} value={tag.nome}>{tag.nome}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          ))}\r\n          <div className=\"filter-group\">\r\n            <button onClick={applyFilters}>Filtrar</button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Painel de Resumo */}\r\n        <div className=\"summary-panel\">\r\n          <h3>Resumo dos Resultados</h3>\r\n          <p><strong>Total de “Transações” (Pagamentos):</strong> {summaryInfo.totalTransactions}</p>\r\n          <p><strong>Total em Valor:</strong> R${summaryInfo.totalValue}</p>\r\n          <p><strong>Número de Pessoas:</strong> {summaryInfo.totalPeople}</p>\r\n          <p><strong>Média por Pessoa:</strong> R${summaryInfo.averagePerPerson}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"relatorio-results\">\r\n        <h3>Resultados ({filteredRows.length})</h3>\r\n        {filteredRows.length > 0 ? (\r\n          <table className=\"relatorio-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Descrição (Pai)</th>\r\n                <th>Data (Pai)</th>\r\n                <th>Pessoa (Pagamento)</th>\r\n                <th>Valor (Pagamento)</th>\r\n                <th>Tipo (Pai)</th>\r\n                <th>Tags</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredRows.map((row, idx) => {\r\n                // Tags do pai\r\n                const paiTags = row.tagsPai || {};\r\n                // Tags do pagamento\r\n                const pagTags = row.tagsPagamento || {};\r\n\r\n                return (\r\n                  <tr key={idx}>\r\n                    <td>{row.descricaoPai}</td>\r\n                    <td>\r\n                      {new Date(row.dataPai).toLocaleDateString('pt-BR', { timeZone: 'UTC' })}\r\n                    </td>\r\n                    <td>{row.pessoa || '—'}</td>\r\n                    <td>R${parseFloat(row.valorPagamento || 0).toFixed(2)}</td>\r\n                    <td>{row.tipoPai}</td>\r\n                    <td>\r\n                      {/* Exibe tags do pai */}\r\n                      {Object.keys(paiTags).map((catName, i) =>\r\n                        paiTags[catName].map((tagName, j) => (\r\n                          <span key={`pai-${i}-${j}`} className=\"tag-chip relatorio-tag-chip\">\r\n                            [Pai] {catName}: {tagName}\r\n                          </span>\r\n                        ))\r\n                      )}\r\n                      {/* Exibe tags do pagamento */}\r\n                      {Object.keys(pagTags).map((catName, i) =>\r\n                        pagTags[catName].map((tagName, j) => (\r\n                          <span key={`pag-${i}-${j}`} className=\"tag-chip relatorio-tag-chip pag-tag-chip\">\r\n                            [Pag] {catName}: {tagName}\r\n                          </span>\r\n                        ))\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <p>Nenhum registro encontrado.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Relatorio;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}